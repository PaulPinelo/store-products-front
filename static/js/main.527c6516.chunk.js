(this["webpackJsonpstore-frontend"]=this["webpackJsonpstore-frontend"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(8),a=n.n(i),u=(n(56),n(57),n(58),n(59),n(50)),l=n(9),s=n(41),o=n(42),d=n(17),b=n.n(d),j=function(){function e(){Object(s.a)(this,e),this.baseUrl="https://store-products-api.herokuapp.com/api/store/"}return Object(o.a)(e,[{key:"create",value:function(e){return b.a.post(this.baseUrl+"product/",e).then((function(e){return e.data}))}},{key:"readAll",value:function(){return b.a.get(this.baseUrl).then((function(e){return e.data}))}},{key:"update",value:function(e){return b.a.put(this.baseUrl+"product/"+e._id,e).then((function(e){return e.data}))}},{key:"delete",value:function(e){return b.a.delete(this.baseUrl+"product/"+e).then((function(e){return e.data}))}}]),e}(),f=n(1),p=Object(c.createContext)(),O=function(e){var t=new j,n=Object(c.useState)([]),r=Object(l.a)(n,2),i=r[0],a=r[1],s=Object(c.useState)(null),o=Object(l.a)(s,2),d=o[0],b=o[1];Object(c.useEffect)((function(){t.readAll().then((function(e){return a(e)}))}),[]);return Object(f.jsx)(p.Provider,{value:{createProduct:function(e){t.create(e).then((function(e){return a([].concat(Object(u.a)(i),[e]))}))},deleteProduct:function(e){t.delete(e).then((function(){return a(i.filter((function(t){return t._id!==e})))}))},findProduct:function(e){var t=i.find((function(t){return t._id===e}));b(t)},updateProduct:function(e){t.update(e).then((function(t){return a(i.map((function(n){return n._id===e._id?t:e})))})),b(null)},editProduct:d,products:i},children:e.children})},h=n(43),x=n(44),m=n(22),v=n(24),g=n(16),y=n(23),P=n(27),C=n(45),S=n(46),N=n(47),_=n(48),k=n(49),F=function(e){var t=e.isVisible,n=e.setIsVisible,r=Object(c.useRef)(null),i=function(e,t,n){r.current.show({severity:e,summary:t,detail:n,life:1e3})},a=Object(c.useContext)(p),u=a.createProduct,s=a.deleteProduct,o=a.editProduct,d=a.updateProduct,b={_id:null,name:"",price:null,expiry_date:null},j=Object(c.useState)(b),O=Object(l.a)(j,2),h=O[0],x=O[1];Object(c.useEffect)((function(){o&&x(o)}),[o]);var v=function(e,t){x(Object(P.a)(Object(P.a)({},h),{},Object(y.a)({},t,e)))},F=Object(f.jsxs)("div",{className:"ui-dialog-buttonpane p-clearfix",children:[Object(f.jsx)(g.Button,{label:"Eliminar",icon:"pi pi-times",className:"p-button-danger",onClick:function(e){Object(k.confirmPopup)({target:e.currentTarget,message:"Esta seguro(a) que quiere eliminar este producto?",icon:"pi pi-exclamation-triangle",accept:function(){return o&&(s(h._id),x(b)),void n(!1)},reject:function(){},acceptLabel:"Si",rejectLabel:"No"})}}),Object(f.jsx)(g.Button,{label:"Guardar",icon:"pi pi-check",onClick:function(){o?(d(h),i("success","Producto actualizado",h.name)):(u(h),i("success","Producto guardado",h.name)),x(b),n(!1)}})]});return Object(f.jsxs)("div",{children:[Object(f.jsx)(_.Toast,{ref:r}),Object(f.jsx)(C.Dialog,{visible:t,modal:!0,style:{width:"420px"},contentStyle:{overflow:"visible"},header:"Detalles del Producto",onHide:function(){return n(!1),void x(b)},footer:F,children:Object(f.jsxs)("div",{className:"p-grid p-fluid",children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(m.InputText,{value:h.name,onChange:function(e){return v(e.target.value,"name")}}),Object(f.jsx)("label",{children:"Nombre:"})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(S.InputNumber,{value:h.price,onChange:function(e){return v(e.value,"price")},mode:"decimal",minFractionDigits:2,maxFracionDigits:2,prefix:"S/"}),Object(f.jsx)("label",{children:"Precio:"})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(N.Calendar,{value:h.expiry_date&&new Date(h.expiry_date+" "),onChange:function(e){return v(e.target.value.toISOString().substring(0,10),"expiry_date")},dateFormat:"yy-mm-dd"}),Object(f.jsx)("label",{children:"Fecha de caducidad:"})]}),Object(f.jsx)("br",{})]})})]})},I=function(){var e=Object(c.useContext)(p),t=e.products,n=e.findProduct,r=Object(c.useState)(null),i=Object(l.a)(r,2),a=i[0],u=i[1],s=Object(c.useState)(!1),o=Object(l.a)(s,2),d=o[0],b=o[1],j=Object(f.jsxs)("div",{style:{textAlign:"right"},children:[Object(f.jsx)("i",{className:"pi pi-search",style:{margin:"4px 10px 0 0"}}),Object(f.jsx)(m.InputText,{type:"search",onInput:function(e){return u(e.target.value)},placeholder:"Busqueda global",size:"50"})]}),O=Object(f.jsx)("div",{className:"p-clearfix",style:{width:"100%"},children:Object(f.jsx)(g.Button,{icon:"pi pi-plus",label:"Add",onClick:function(){return b(!0)}})});return Object(f.jsxs)("div",{children:[Object(f.jsx)(h.Panel,{header:"LISTA DE PRODUCTOS",style:{textAlign:"center"},children:Object(f.jsxs)(x.DataTable,{value:t,selectionMode:"single",onSelectionChange:function(e){return t=e.value._id,n(t),void b(!0);var t},header:j,footer:O,globalFilter:a,className:"p-datatable-sm p-datatable-responsive-demo",showGridlines:!0,resizableColumns:!0,columnResizeMode:"fit",children:[Object(f.jsx)(v.Column,{field:"name",header:"Nombre",sortable:!0}),Object(f.jsx)(v.Column,{field:"price",header:"Precio",sortable:!0}),Object(f.jsx)(v.Column,{field:"expiry_date",header:"Fecha de Caducidad",sortable:!0})]})}),Object(f.jsx)(F,{isVisible:d,setIsVisible:b})]})};var w=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(O,{children:Object(f.jsx)(I,{})})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,118)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),D()},56:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.527c6516.chunk.js.map