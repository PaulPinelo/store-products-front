(this["webpackJsonpstore-frontend"]=this["webpackJsonpstore-frontend"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(8),a=n.n(r),u=(n(54),n(55),n(56),n(57),n(48)),l=n(9),s=n(40),o=n(41),d=n(16),b=n.n(d),j=function(){function e(){Object(s.a)(this,e),this.baseUrl="https://store-products-api.herokuapp.com/api/store/"}return Object(o.a)(e,[{key:"create",value:function(e){return b.a.post(this.baseUrl+"product/",e).then((function(e){return e.data}))}},{key:"readAll",value:function(){return b.a.get(this.baseUrl).then((function(e){return e.data}))}},{key:"update",value:function(e){return b.a.put(this.baseUrl+"product/"+e._id,e).then((function(e){return e.data}))}},{key:"delete",value:function(e){return b.a.delete(this.baseUrl+"product/"+e).then((function(e){return e.data}))}}]),e}(),f=n(1),p=Object(c.createContext)(),O=function(e){var t=new j,n=Object(c.useState)([]),i=Object(l.a)(n,2),r=i[0],a=i[1],s=Object(c.useState)(null),o=Object(l.a)(s,2),d=o[0],b=o[1];Object(c.useEffect)((function(){t.readAll().then((function(e){return a(e)}))}),[]);return Object(f.jsx)(p.Provider,{value:{createProduct:function(e){t.create(e).then((function(e){return a([].concat(Object(u.a)(r),[e]))}))},deleteProduct:function(e){t.delete(e).then((function(){return a(r.filter((function(t){return t._id!==e})))}))},findProduct:function(e){var t=r.find((function(t){return t._id===e}));b(t)},updateProduct:function(e){t.update(e).then((function(t){return a(r.map((function(n){return n._id===e._id?t:e})))})),b(null)},editProduct:d,products:r},children:e.children})},h=n(42),x=n(43),v=n(20),m=n(22),g=n(15),y=n(21),C=n(26),P=n(44),S=n(45),_=n(46),N=n(47),k=function(e){var t=e.isVisible,n=e.setIsVisible,i=Object(c.useRef)(null),r=function(e,t,n){i.current.show({severity:e,summary:t,detail:n,life:1e3})},a=Object(c.useContext)(p),u=a.createProduct,s=a.deleteProduct,o=a.editProduct,d=a.updateProduct,b={_id:null,name:"",price:null,expiry_date:null},j=Object(c.useState)(b),O=Object(l.a)(j,2),h=O[0],x=O[1];Object(c.useEffect)((function(){o&&x(o)}),[o]);var m=function(e,t){x(Object(C.a)(Object(C.a)({},h),{},Object(y.a)({},t,e)))},k=Object(f.jsxs)("div",{className:"ui-dialog-buttonpane p-clearfix",children:[Object(f.jsx)(g.Button,{label:"Delete",icon:"pi pi-times",onClick:function(){o&&(s(h._id),x(b)),n(!1)}}),Object(f.jsx)(g.Button,{label:"Save",icon:"pi pi-check",onClick:function(){o?(d(h),r("success","Producto actualizado",h.name)):(u(h),r("success","Producto guardado",h.name)),x(b),n(!1)}})]});return Object(f.jsxs)("div",{children:[Object(f.jsx)(N.Toast,{ref:i}),Object(f.jsx)(P.Dialog,{visible:t,modal:!0,style:{width:"420px"},contentStyle:{overflow:"visible"},header:"Detalles del Producto",onHide:function(){return n(!1),void x(b)},footer:k,children:Object(f.jsxs)("div",{className:"p-grid p-fluid",children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(v.InputText,{value:h.name,onChange:function(e){return m(e.target.value,"name")}}),Object(f.jsx)("label",{children:"Nombre:"})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(S.InputNumber,{value:h.price,onChange:function(e){return m(e.value,"price")},mode:"decimal",minFractionDigits:2,maxFracionDigits:2,prefix:"S/"}),Object(f.jsx)("label",{children:"Precio:"})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"p-float-label",children:[Object(f.jsx)(_.Calendar,{value:h.expiry_date&&new Date(h.expiry_date+" "),onChange:function(e){return m(e.target.value.toISOString().substring(0,10),"expiry_date")},dateFormat:"yy-mm-dd"}),Object(f.jsx)("label",{children:"Fecha de caducidad:"})]}),Object(f.jsx)("br",{})]})})]})},D=function(){var e=Object(c.useContext)(p),t=e.products,n=e.findProduct,i=Object(c.useState)(null),r=Object(l.a)(i,2),a=r[0],u=r[1],s=Object(c.useState)(!1),o=Object(l.a)(s,2),d=o[0],b=o[1],j=Object(f.jsxs)("div",{style:{textAlign:"right"},children:[Object(f.jsx)("i",{className:"pi pi-search",style:{margin:"4px 10px 0 0"}}),Object(f.jsx)(v.InputText,{type:"search",onInput:function(e){return u(e.target.value)},placeholder:"Busqueda global",size:"50"})]}),O=Object(f.jsx)("div",{className:"p-clearfix",style:{width:"100%"},children:Object(f.jsx)(g.Button,{icon:"pi pi-plus",label:"Add",onClick:function(){return b(!0)}})});return Object(f.jsxs)("div",{children:[Object(f.jsx)(h.Panel,{header:"LISTA DE PRODUCTOS",style:{textAlign:"center"},children:Object(f.jsxs)(x.DataTable,{value:t,selectionMode:"single",onSelectionChange:function(e){return t=e.value._id,n(t),void b(!0);var t},header:j,footer:O,globalFilter:a,className:"p-datatable-sm p-datatable-responsive-demo",showGridlines:!0,resizableColumns:!0,columnResizeMode:"fit",children:[Object(f.jsx)(m.Column,{field:"name",header:"Nombre",sortable:!0}),Object(f.jsx)(m.Column,{field:"price",header:"Precio",sortable:!0}),Object(f.jsx)(m.Column,{field:"expiry_date",header:"Fecha de Caducidad",sortable:!0})]})}),Object(f.jsx)(k,{isVisible:d,setIsVisible:b})]})};var F=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(O,{children:Object(f.jsx)(D,{})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root")),I()},54:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.f9aaaff1.chunk.js.map